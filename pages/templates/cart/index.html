{% extends 'pages/base.html' %}
{% block title %}{{ title }}{% endblock %}
{% block header_title %}{{ subtitle }}{% endblock %}
{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-12">
            <h1>Available products</h1>
            
            {% if products %}
                <ul class="product-list">
                    {% for key, product in products.items %}
                        <li class="product-item">
                            <div class="product-info">
                                <span class="product-id">Id: {{ key }}</span> -
                                <span class="product-name">Name: {{ product.name }}</span> -
                                <span class="product-price">Price: {{ product.price }}</span>
                            </div>
                            
                            {# Add to Cart Form #}
                            <form method="post" action="{% url 'cart_add' key %}" class="add-to-cart-form">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-primary">
                                    Add product to cart
                                </button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="no-products-message">No products available at the moment.</p>
            {% endif %}
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-12">
            <h1>Products in cart</h1>            
            {% if cart_products %}
                <ul class="cart-list">
                    {% for key, product in cart_products.items %}
                        <li class="cart-item">
                            <div class="cart-product-info">
                                <span class="product-id">Id: {{ key }}</span> -
                                <span class="product-name">Name: {{ product.name }}</span> -
                                <span class="product-price">Price: {{ product.price }}</span>
                            </div>
                        </li>
                    {% endfor %}
                </ul>                
                {# Clear Cart Form #}
                <div class="cart-actions">
                    <form method="post" action="{% url 'cart_removeAll' %}" class="clear-cart-form">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger">
                            Remove all products from cart
                        </button>
                    </form>
                </div>
            {% else %}
                <p class="empty-cart-message">Your cart is empty.</p>
            {% endif %}
        </div>
    </div>
    
</div>
{% endblock %}
